{% extends "base.html" %}
{% block more_js %}
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript" src="/resources/js/live.js"></script>
{% endblock %}
{% block more_css %}
  <link rel="stylesheet" href="/resources/css/live.css" type="text/css" media="screen" />
{% endblock %}
{% block content %}

  <div style="padding:15px 0px;">
    <div style="font-size:1.3em; display:none;" id="live-map-for-container">
      Live Map for
      <span id="current-map-for">
	{% if current_user %}{{ current_user.nickname }}{% endif %}
      </span>
      <span style="font-size:1em;">[<span class="pseudo-link" id="change-secret">Change</span>]</span>
      [<a href="#" id="map-permalink">Permanent link to this map</a>]
    </div>
    <div id="secret-change-area" style="display:none;">
      <input name="theSecret" type="text" class="defaultText" value="" title="Enter secret" />
      <div id="change-secret-go">Go!</div>
    </div>
  </div>

  <div id="maps-n-things" style="visibility:hidden;">
    <div class="button" id="toggle-autorefresh">Enable Autorefresh</div>

    <div style="margin: 20px 0px;">
      <div id="map-canvas" style="height:600px;width:900px;"></div>
    </div>

    Number of points to display: <input type="text" value="30" style="width:50px;" id="num-points" />
    <div class="button" id="apply-changes">Apply</div>
    <div>
      Map broken? Click <a href="#" id="broken-map">here</a>.
    </div>
  </div>


  <!-- the template for the InfoWindow: -->
  <script id="info-window-template" type="text/x-jquery-tmpl">
    <div class="info-window-top">
      <h5 style="padding-bottom:10px;">${date} UTC</h5>
      <div class="info-window-item">
	<div class="info-window-left">Latitude:</div>
	<div class="info-window-right">${latitude}</div>
      </div>
      <div class="info-window-item">
	<div class="info-window-left">Longitude:</div>
	<div class="info-window-right">${longitude}</div>
      </div>
      <div class="info-window-item">
	<div class="info-window-left">Accuracy:</div>
	<div class="info-window-right">${accuracy}</div>
      </div>
      <div class="info-window-item">
	<div class="info-window-left">Speed:</div>
	<div class="info-window-right">${speed}</div>
      </div>
    </div>
  </script>

  <div id="hide-me" style="display:none;"></div>

{% endblock %}
